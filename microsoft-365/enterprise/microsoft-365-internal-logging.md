---
title: Microsoft 365 の内部ログの Microsoft 365 エンジニアリング
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: この記事では、Microsoft 365 エンジニアリングチームの内部ログのしくみについて説明します。
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: b4c4b1db876a6b68ec852adbbd51afe7386a1855
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/14/2020
ms.locfileid: "46696235"
---
# <a name="internal-logging-for-microsoft-365-engineering"></a>Microsoft 365 エンジニアリングの内部ログ

お客様が利用できるイベントとログデータに加えて、microsoft の microsoft 365 エンジニアが利用できる内部ログデータ収集システムもあります。 Microsoft 365 サーバーから、Cosmos と呼ばれる内部の大規模なデータコンピューティングサービスに、さまざまな種類のログデータがアップロードされています。 各サービスチームは、それぞれのサーバーからの監査ログを Cosmos データベースにアップロードして、集約と分析を行います。 このデータ転送は、「Office データローダー (ODL)」と呼ばれる独自の自動化ツールを使用して、明示的に承認されたポートとプロトコルに基づいて、FIPS 140-2 で検証された TLS 接続を介して行われます。 Microsoft 365 で監査レコードを収集して処理するために使用されるツールでは、元の監査レコードのコンテンツや時間の順序を永続的に変更したり、取り消したりすることはできません。

サービスチームは、Cosmos を一元的なリポジトリとして使用して、アプリケーションの使用状況の分析、システムおよび運用上のパフォーマンスの測定、問題やセキュリティの問題を示す異常なパターンの調査を行います。 各サービスチームは、分析の対象に応じてログのベースラインを Cosmos にアップロードします。これには、多くの場合、次のものが含まれます。

- イベントログ
- AppLocker ログ
- パフォーマンス データ
- System Center データ
- 通話詳細レコード
- Qoe (Quality of experience) データ
- IIS Web サーバーのログ
- SQL Server ログ
- Syslog データ
- セキュリティ監査ログ

データを Cosmos にアップロードする前に、ODL アプリケーションはスクラブサービスを使用して、テナント情報やエンドユーザー識別情報などの顧客データを含むフィールドを難読化し、それらのフィールドをハッシュ値で置換します。 匿名化とハッシュ化されたログが書き直され、Cosmos にアップロードされます。 サービスチームは、Cosmos 内のデータに対してスコープ指定クエリを実行して、関連付け、警告、およびレポートを作成します。 Cosmos での監査ログデータの保持期間は、サービスチームによって決定されます。ほとんどの監査ログデータは、セキュリティインシデント調査のサポートおよび規制保持要件への対応のために、90日間またはそれ以上保持されます。

Cosmos に格納されている Microsoft 365 データへのアクセスは、権限のある人物に制限されます。 Microsoft は、監査機能の管理を、監査機能を担当するサービスチームメンバーの制限されたサブセットに制限します。 これらのチームメンバーは、Cosmos のデータを変更または削除することはできません。また、Cosmos のログメカニズムに加えられたすべての変更は記録および監査されます。

各サービスチームは、特定のアプリケーションが特定の分析を実行することを承認することによって、分析用のログデータにアクセスします。 たとえば、Microsoft 365 セキュリティチームは、独自のイベントログパーサーを使用して Cosmos のデータを使用して、Microsoft 365 運用環境で疑わしい可能性のあるアクティビティに関する操作可能なレポートを関連付け、警告、および生成します。 このデータからのレポートは、脆弱性を修正し、サービスの全体的なパフォーマンスを向上させるために使用されます。 特定の警告またはレポートでさらに調査が必要な場合、サービス担当者は、そのデータを Microsoft 365 サービスにインポートして戻すように要求できます。 Cosmos からインポートされる特定のログは暗号化されており、サービス担当者は復号化キーにアクセスできないため、対象のログは、スコープが設定された結果を承認済みのサービス担当者に返す復号化サービスを介してプログラムによって渡されます。 この課題から見つかった脆弱性は、Microsoft の標準セキュリティインシデント管理チャネルを使用して報告およびエスカレートされます。
