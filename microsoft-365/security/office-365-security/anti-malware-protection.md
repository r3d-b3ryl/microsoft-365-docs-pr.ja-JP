---
title: マルウェア対策保護
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: overview
ms.localizationpriority: medium
search.appverid:
- MET150
ms.assetid: 0e39a0ce-ab8b-4820-8b5e-93fbe1cc11e8
ms.collection:
- M365-security-compliance
- m365initiative-defender-office365
description: 管理者は、Exchange Online Protection (EOP) のウイルス、スパイウェア、ランサムウェアから保護するマルウェア対策とマルウェア対策ポリシーについて学習できます。
ms.custom: seo-marvel-apr2020
ms.subservice: mdo
ms.service: microsoft-365-security
ms.openlocfilehash: 3a50111ae5c5b5823138ec400d7fe2c0e42e06fa
ms.sourcegitcommit: 10e6abe740e27000e223378eb17d657a47555fa8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/31/2022
ms.locfileid: "67466879"
---
# <a name="anti-malware-protection-in-eop"></a>EOP のマルウェア対策保護

[!INCLUDE [MDO Trial banner](../includes/mdo-trial-banner.md)]

**適用対象**
- [Exchange Online Protection](exchange-online-protection-overview.md)
- [Microsoft Defender for Office 365 プラン 1 およびプラン 2](defender-for-office-365.md)
- [Microsoft 365 Defender](../defender/microsoft-365-defender.md)

Exchange Online のメールボックスを使用している Microsoft 365 の組織、または Exchange Online のメールボックスを使用していないものの、スタンドアロンの Exchange Online Protection (EOP) をお使いの組織の場合、メール メッセージは EOP によってマルウェアから自動的に保護されます。 マルウェアの主なカテゴリーには次のようなものがあります。

- 他のプログラムやデータに感染し、感染するプログラムを探しているコンピューターまたはネットワークを介して拡散する **ウイルス**。
- サインイン情報や個人データなどの個人情報を収集し、作成者に返送する **スパイウェア**。
- **ランサムウェア** は、データを暗号化し、暗号化解除のための支払いを要求します。 マルウェア対策ソフトウェアは、暗号化されたファイルの暗号化解除には役立ちませんが、ランサムウェアに関連付けられているマルウェア ペイロードを検出して削除できます。

EOP は、組織に出入りするすべての既知のマルウェアを Windows、Linux、Mac でキャッチするように設計された多層マルウェア保護を提供します。 次のオプションは、マルウェア対策保護を提供します。

- **階層化された対マルウェア防御**: 複数のマルウェア対策スキャン エンジンによって、既知の脅威と未知の脅威の両方から保護します。 これらのエンジンには、強力な発見的検出機能が組み込まれており、マルウェアのアウトブレイクの初期段階であっても保護が可能です。 このマルチエンジン アプローチが、1 種類のマルウェア対策エンジンを使用するよりはるかに強力な保護を提供することは明らかです。
- **リアルタイムの脅威対応**: 一部の大規模感染の間、マルウェア対策チームは、サービスで使用されるスキャン エンジンから定義を利用する前であっても、脅威を検出する高度なポリシー ルールを記述するのに十分な情報をマルウェア対策チームが持っている可能性があります。 これらのルールは、グローバル ネットワークで 2 時間ごとに公開されるため、各組織はそれを使用して攻撃に対する保護層をさらに強化できます。
- **マルウェア対策定義の高速展開**: マルウェア対策チームは、マルウェア対策エンジンを開発するパートナーと密接な関係を維持します。 その結果、サービスは、マルウェア定義が一般にリリースされる前に、その定義を受け取って統合し修正することができます。 多くの場合、これらのパートナーとの関係が、Microsoft 独自の優れた修正方法の開発につながっています。 サービスは、すべてのマルウェア対策エンジンの更新された定義を 1 時間ごとに確認します。

EOP では、 _添付_ ファイルにマルウェアが含まれていることが検出されたメッセージは検疫されます。 受信者が検疫済みメッセージを表示できるかどうか、またはその他の方法で操作できるかどうかは、 _検疫ポリシー_ によって制御されます。 既定では、マルウェアが原因で検疫されたメッセージは、管理者のみが表示およびリリースできます。 詳細については、次のトピックをご覧ください。

- [検疫ポリシー](quarantine-policies.md)
- [EOP で管理者として検疫済みのメッセージとファイルを管理します](manage-quarantined-messages-and-files.md)。

マルウェア対策の保護の詳細については、マルウェア対策に関する FAQ を参照 [してください](anti-malware-protection-faq-eop.yml)。

マルウェア対策ポリシーを構成するには、「 [マルウェア対策ポリシーの構成」を](configure-anti-malware-policies.md)参照してください。

Microsoft にマルウェアを送信するには、「 [メッセージとファイルを Microsoft に報告する」を](report-junk-email-messages-to-microsoft.md)参照してください。

## <a name="anti-malware-policies"></a>マルウェア対策ポリシー

マルウェア対策ポリシーは、マルウェア検出の設定と通知オプションを制御します。 マルウェア対策ポリシーの重要な設定は次のとおりです。

- **一般的な添付ファイル フィルター**: メールで送信すべきでないファイルの種類 (実行可能ファイルなど) があります。 これらの種類のファイルをマルウェアに対してスキャンする必要があるのはなぜですか。 そこで、一般的な添付ファイル フィルターが表示されます。 指定したファイルの種類は、自動的にマルウェアとして扱われます。

  - 既定のファイルの種類: `ace, ani, apk, app, appx, arj, bat, cmd, com, deb, dex, dll, docm, elf, exe, hta, img, jar, kext, lha, lib, library, lnk, lzh, macho, msc, msi, msix, msp, mst, pif, ppa, ppam, reg, rev, scf, scr, sct, sys, uif, vb, vbe, vbs, vxd, wsc, wsf, wsh, xll, xz, z`.
  - Microsoft 365 Defender ポータル<sup>\*</sup>で選択できるその他のファイルの種類。 `7z, 7zip, a, accdb, accde, action, ade, adp, appxbundle, asf, asp, aspx, avi, bin, bundle, bz, bz2, bzip2, cab, caction, cer, chm, command, cpl, crt, csh, css, der, dgz, dmg, doc, docx, dot, dotm, dtox, dylib, font, gz, gzip, hlp, htm, html, imp, inf, ins, ipa, iso, isp, its, jnlp, js, jse, ksh, lqy, mad, maf, mag, mam, maq, mar, mas, mat, mav, maw, mda, mdb, mde, mdt, mdw, mdz, mht, mhtml, mscompress, msh, msh1, msh1xml, msh2, msh2xml, mshxml, msixbundle, o, obj, odp, ods, odt, one, onenote, ops, package, pages, pbix, pdb, pdf, php, pkg, plugin, pps, ppsm, ppsx, ppt, pptm, pptx, prf, prg, ps1, ps1xml, ps2, ps2xml, psc1, psc2, pst, pub, py, rar, rpm, rtf, scpt, service, sh, shb, shtm, shx, so, tar, tarz, terminal, tgz, tool, url, vhd, vsd, vsdm, vsdx, vsmacros, vss, vssx, vst, vstm, vstx, vsw, workflow, ws, xhtml, xla, xlam, xls, xlsb, xlsm, xlsx, xlt, xltm, xltx, zi, zip, zipx`

    <sup>\*</sup>任意のテキスト値を入力するには、PowerShell の [New-MalwareFilterPolicy](/powershell/module/exchange/new-malwarefilterpolicy) コマンドレットまたは [Set-MalwareFilterPolicy](/powershell/module/exchange/set-malwarefilterpolicy) コマンドレットの _FileTypes_ パラメーター Exchange Online使用します。

  一般的な添付ファイル フィルターでは、ファイル名拡張子に関係なく、ベスト エフォート型の true-type を使用してファイルの種類を検出します。 true-type が失敗した場合、または指定したファイルの種類でサポートされていない場合は、単純な拡張子の照合が使用されます。

- **マルウェアのゼロ時間自動消去 (ZAP): マルウェア** の検疫メッセージの ZAP は、Exchange Onlineメールボックスに配信 _された後_ にマルウェアが含まれていることが検出されました。 既定では、マルウェアの ZAP はオンになっており、オンのままにすることをお勧めします。

- **検疫ポリシー**: マルウェアとして検疫されたメッセージに適用される検疫ポリシーを選択します。 検疫ポリシーは、検疫されたメッセージに対してユーザーが実行できる操作と、ユーザーが検疫通知を受け取るかどうかを定義します。 既定では、受信者はマルウェアとして検疫されたメッセージの通知を受け取りません。 詳細については、「[検疫ポリシー](quarantine-policies.md)」を参照してください。

- **管理通知**: 内部または外部の送信者からのメッセージで検出されたマルウェアの通知を受信する追加の受信者 (管理者) を指定できます。 内部通知と外部通知の差出人 **アドレス**、 **件名**、 **メッセージ テキスト** をカスタマイズできます。

  > [!NOTE]
  > 管理者の通知は、マルウェアとして分類された _添付ファイル_ についてのみ送信されます。
  >
  > マルウェア対策ポリシーに割り当てられている検疫ポリシーは、受信者がマルウェアとして検疫されたメッセージの電子メール通知を受信するかどうかを決定します。

- **受信者フィルター**: カスタムマルウェア対策ポリシーの場合、ポリシーの適用先を決定する受信者の条件と例外を指定できます。 条件や例外には次のプロパティを使用できます。

  - **受信者が次の場合**
  - **受信者のドメインは次のとおりです。**
  - **受信者が次のメンバーの場合**

  条件または例外は 1 回だけ使用できますが、条件または例外には複数の値を含めることができます。同じ条件または例外に複数の値がある場合、OR ロジック (_\<recipient1\>_ または _\<recipient2\>_ など) が用されます。別の条件や例外がある場合は、AND ロジック (_\<recipient1\>_ や _\<member of group 1\>_ など) が適用されます。

  > [!IMPORTANT]
  > 複数の異なる条件または例外は可算的ではありません。包括的です。 ポリシーは、指定された _すべての_ 受信者フィルターに一致する受信者 _にのみ_ 適用されます。 たとえば、次の値を使用してポリシーで受信者フィルター条件を構成します:
  >
  > - 受信者は次のとおりです: romain@contoso.com
  > - 受信者が次のメンバーの場合: Executive
  >
  > ポリシーは、Executive グループのメンバーである場合 _にのみ_、romain@contoso.com に適用されます。 グループのメンバーでない場合、ポリシーは適用されません。
  >
  > 同様に、同じ受信者フィルターをポリシーの例外として使用する場合、受信者が Executive グループのメンバーでもある場合 _にのみ_、ポリシーは romain@contoso.com に適用されません。 グループのメンバーでない場合でも、ポリシーは適用されます。

- **優先度**: 複数のカスタムマルウェア対策ポリシーを作成する場合は、適用される順序を指定できます。 2つのポリシーが同じ優先順位を持つことはできません。最初のポリシーが適用されると、ポリシーの処理は停止します。

  優先順位と複数のポリシーを評価し適用する方法の詳細については、「[メール保護の優先順位](how-policies-and-protections-are-combined.md)」を参照してください。

### <a name="anti-malware-policies-in-the-microsoft-365-defender-portal-vs-powershell"></a>Microsoft 365 Defender ポータルと PowerShell のマルウェア対策ポリシー

マルウェア対策ポリシーの基本的な要素は次のとおりです。

- **マルウェア フィルター ポリシー**: 受信者の通知、送信者と管理者の通知、ZAP、および一般的な添付ファイルフィルターの設定を指定します。
- **マルウェア フィルター規則: マルウェア フィルター** ポリシーの優先度と受信者フィルター (ポリシーが適用されるユーザー) を指定します。

Microsoft 365 Defender ポータルでマルウェア対策ポリシーを管理する場合、これら 2 つの要素の違いは明らかではありません。

- マルウェア対策ポリシーを作成すると、実際には、両方に同じ名前を使用して、マルウェア フィルター ルールと関連するマルウェア フィルター ポリシーを同時に作成します。
- マルウェア対策ポリシーを変更すると、名前、優先度、有効または無効、受信者フィルターに関連する設定によってマルウェア フィルタールールが変更されます。 その他の設定 (受信者の通知、送信者と管理者の通知、ZAP、一般的な添付ファイル フィルター) は、関連付けられているマルウェア フィルター ポリシーを変更します。
- マルウェア対策ポリシーを削除すると、マルウェア フィルタールールと関連するマルウェア フィルター ポリシーが削除されます。

Exchange Online PowerShell またはスタンドアロン EOP PowerShell では、マルウェア フィルター ポリシーとマルウェア フィルター ルールの違いは明らかです。 マルウェア フィルター ポリシーの管理には **\*-MalwareFilterPolicy** コマンドレットを使用し、マルウェア フィルター規則の管理には **\*-MalwareFilterRule** コマンドレットを使用します。

- PowerShell では、最初にマルウェア フィルター ポリシーを作成し、ルールが適用されるポリシーを識別するマルウェア フィルター ルールを作成します。
- PowerShell では、マルウェア フィルター ポリシーとマルウェア フィルター 規則の設定を個別に変更します。
- PowerShell からマルウェア フィルター ポリシーを削除しても、対応するマルウェア フィルタールールは自動的に削除されません。また、その逆も同様です。

### <a name="default-anti-malware-policy"></a>既定のマルウェア対策ポリシー

すべての組織には、次のプロパティを持つ Default という名前のマルウェア対策ポリシーが組み込まれています。

- ポリシーに関連付けられているマルウェア フィルター ルール (受信者フィルター) がない場合でも、ポリシーは組織内のすべての受信者に適用されます。
- ポリシーにはカスタムの優先順位の値 **Lowest** が設定されており、変更することはできません (このポリシーは常に最後に適用されます)。 作成するどのカスタムのマルウェア対策ポリシーも、Default という名前のポリシーより高い優先順位を持ちます。
- ポリシーは既定のポリシー (**IsDefault** のプロパティが `True` の値になっている) であり、既定のポリシーを削除することはできません。
