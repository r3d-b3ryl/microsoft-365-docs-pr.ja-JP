---
title: テスト ベースでのバイナリ ファイルの作成とテスト
description: Test Base でバイナリ ファイルを作成してテストする方法
search.appverid: MET150
author: Tinacyt
ms.author: tinachen
manager: rshastri
audience: Software-Vendor
ms.topic: troubleshooting
ms.date: 04/08/2022
ms.service: test-base
ms.localizationpriority: medium
ms.collection: TestBase-M365
ms.custom: ''
ms.reviewer: Tinacyt
f1.keywords: NOCSH
ms.openlocfilehash: 16d8dd96b9fef1aaa01437f3c1175021a1f9f33d
ms.sourcegitcommit: eb81b49205cbc66b021326b8e2c00a8336b4a2fa
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/11/2022
ms.locfileid: "67315704"
---
# <a name="creating-and-testing-binary-files-on-test-base"></a>テスト ベースでのバイナリ ファイルの作成とテスト

このセクションでは、テスト ベースでのアップロードとテストのために、バイナリ ファイルを含む新しいパッケージを作成するために必要なすべての手順について説明します。 既にビルド済みの.zip ファイルがある場合は、「ビルド [済みの Zip パッケージのアップロード](uploadApplication.md)」を参照して、ファイルをアップロードできます。

> [!IMPORTANT]
> Test Base アカウントを持っていない場合は、 **テスト ベース** アカウントの作成に関する説明に従って、先に進む前に作成 [する必要があります](createAccount.md)。

## <a name="create-a-new-package"></a>新しいパッケージを作成する

[Azure portal](https://portal.azure.com/)で、パッケージを作成してアップロードする **Test Base** アカウントに移動し、次の手順を実行します。 

左側のメニューの [ **パッケージ カタログ**] で、[ **新しいパッケージ**] を選択します。 次に、最初のカード **[新しいパッケージをオンラインで作成] を** クリックして、5 つの手順でパッケージをオンラインでビルドします。

> [!div class="mx-imgBorder"]
> ![新しいパッケージの作成ウィザード](Media/testapplication01.png)

### <a name="step-1-define-content"></a>手順 1. コンテンツを定義する

1. **[パッケージ ソース**] セクションで、パッケージ ソースの種類で [バイナリ] (.exe、.msiなど) を選択します。

   > [!div class="mx-imgBorder"]
   > ![パッケージ ソースを選択する](Media/testapplication02.png)

2. 次に、[ファイルの選択] ボタンをクリックするか、チェック ボックスをオンにして、ファイルの準備がまだできていない場合は、Test Base サンプル テンプレートを開始点として使用します。

   > [!div class="mx-imgBorder"]
   > ![ファイルを選択する](Media/testapplication03.png)

3. [ **基本情報** ] セクションにパッケージの名前とバージョンを入力します。

   > [!NOTE]
   > パッケージ名とバージョンの組み合わせは、Test Base アカウント内で一意である必要があります。

   > [!div class="mx-imgBorder"]
   > ![基本情報を入力する](Media/testapplication04.png)

4. 要求されたすべての情報が指定されたら、[次 **へ: 構成テスト** ] ボタンをクリックして、次のフェーズに進むことができます。

   > [!div class="mx-imgBorder"]
   > ![次のステップ](Media/testapplication05.png)

### <a name="step-2-configure-test"></a>手順 2。 テストを構成する

1. テストの **種類** を選択します。 サポートされているテストの種類は 2 つあります。
   - **Out of Box (OOB) テスト** では、パッケージのインストール、起動、閉じ、アンインストールが実行されます。 インストール後、1 回のアンインストールが実行される前に、起動終了ルーチンが 30 回繰り返されます。 OOB テストでは、パッケージで標準化されたテレメトリを提供し、Windows ビルド間で比較できます。
   - **機能テスト** では、アップロードしたテスト スクリプトがパッケージに対して実行されます。 スクリプトは指定した順序で実行され、特定のスクリプトでエラーが発生すると、後続のスクリプトの実行が停止されます。

   > [!NOTE]
   > Out Of Box テストは現在省略可能です。

   > [!div class="mx-imgBorder"]
   > ![Out Of Box テストは省略可能です](Media/testapplication07.png)

2. 必要なすべての情報が入力されたら、下部にある [次へ] ボタンをクリックして手順 3 に進むことができます。 テスト スクリプトが正常に生成されると、通知がポップアップ表示されます。

   > [!div class="mx-imgBorder"]
   > ![スクリプト プロンプトを生成する](Media/testapplication08.png)

### <a name="step-3-edit-package"></a>手順 3. パッケージを編集する

1. [パッケージの編集] タブで、次の操作を行うことができます。
   - パッケージ プレビューでパッケージ フォルダーとファイル構造を確認 **します**。
   - **PowerShell コード エディター** を使用してスクリプトをオンラインで編集します。

   > [!NOTE]
   > 一部のサンプル スクリプトは、参照用に生成されています。 各スクリプトを慎重に確認し、コマンドとプロセス名を独自のスクリプトに置き換える必要があります。 

   > [!div class="mx-imgBorder"]
   > ![オンラインでスクリプトを編集する](Media/testapplication09.png)

2. **パッケージ プレビュー** では、必要に応じて、次の操作を実行できます。
   - 新しいフォルダーを作成します。
   - 新しいスクリプトを作成します。
   - 新しいファイルをアップロードします。

   > [!div class="mx-imgBorder"]
   > ![リソースを作成する](Media/testapplication10.png)

3. **スクリプト フォルダー** の下に、サンプル スクリプトとスクリプト タグが自動的に作成されています。 すべてのスクリプト タグは編集可能です。スクリプト パスを参照するように再割り当てできます。
   - 手順 2 で **Out Of Box テスト** が選択されている場合は、スクリプト フォルダーの下に **outofbox** フォルダーが表示されます。 また、インストール スクリプトの **[インストール後に再起動]** タグを追加することもできます。

   > [!div class="mx-imgBorder"]
   > ![参照スクリプト](Media/testapplication11.png)

   > [!NOTE]
   > OOB テストの種類には、インストール、起動、および終了スクリプト タグが必須です。 タグを再割り当てすると、テストの開始時に正しいスクリプト パスが使用されるようになります。

   > [!div class="mx-imgBorder"]
   > ![パッケージの編集プロンプト](Media/testapplication11-2.png)

   - 手順 2 で **機能テスト** が選択されている場合は、スクリプト フォルダーの下に **機能** フォルダーが表示されます。 [機能テスト リストに追加] ボタンを使用して、さらに **機能するテスト スクリプトを追加** できます。 少なくとも 1 つの (1) スクリプトが必要であり、最大 8 個の機能テスト スクリプトを追加できます。

   > [!div class="mx-imgBorder"]
   > ![機能テスト リストに追加する](Media/testapplication12.png)

   > [!NOTE]
   > 機能テストの種類には、少なくとも 1 つの機能スクリプト タグが必須です。

   さらに機能スクリプトを追加するには、[ **機能テストの一覧に追加] を** クリックします。 その後、アクション パネルがポップアップ表示されます。次のことができます。
   - 左の省略記号ボタンを使用してドラッグして、スクリプト パスの順序を変更します。 機能スクリプトは、一覧に示されている順序で実行されます。 特定のスクリプトでエラーが発生すると、後続のスクリプトの実行が停止されます。
   - 複数のスクリプトに対して [実行後に再起動] を設定します。
   - 特定のスクリプト パスの前に更新プログラムを適用します。 これは、機能テスト スクリプトを実行する順序でWindows Updateパッチを適用するタイミングを示す機能テストを実行するユーザー向けです。

   > [!div class="mx-imgBorder"]
   > ![機能テスト](Media/testapplication13.png)

4. 必要なすべての情報が入力されたら、下部にある [次へ] ボタンをクリックして手順 4 に進むことができます。

### <a name="step-4-test-matrix"></a>手順 4. テスト マトリックス

1. [テスト マトリックス] タブで、 **OS 更新** プログラムの種類を選択します。 サポートされている OS 更新プログラムの種類は 2 つあります。
   - **セキュリティ更新プログラム** を使用すると、パッケージを Windows プレリリースの毎月のセキュリティ更新プログラムの増分チャーンに対してテストできます。
   - **機能更新プログラム** を使用すると、Windows Insider Program からビルドされた Windows プレリリースの 2 年間の機能更新プログラムに対してパッケージをテストできます。

2. セキュリティ更新プログラムテストの OS バージョンを選択します。

   **OS 更新プログラムの種類でセキュリティ更新プログラム** が選択されている場合は、パッケージのテスト対象となる Windows の OS バージョンを選択する必要があります。

   > [!NOTE]
   > サーバーとクライアントの両方の OS に対してパッケージをテストすることを選択した場合は、パッケージが互換性があり、両方の OS で実行できることを確認してください。

3. 機能更新テストのオプションを選択します。
   - OS **更新プログラムの** 種類で機能更新プログラムが選択されている場合は、次のオプションを完了する必要があります。
   - **Insider Channel** の場合は、パッケージをテストするビルドとして Windows Insider Program Channel を選択します。 現在、 **Insider Beta Channel** でフライティングされたビルドを使用しています。
   - **Insight の OS ベースライン** の場合は、テスト結果を比較する際にベースラインとして使用する Windows OS バージョンを選択します。

   > [!div class="mx-imgBorder"]
   > ![Windows OS バージョンを選択する](Media/testapplication14.png)

4. 必要な情報がすべて入力されたら、下部にある [次へ] ボタンをクリックして、手順 5 (最後の手順) に移動できます。

### <a name="step-5-review--publish"></a>手順 5.  レビューと発行

1. 下書きパッケージの正確性と正確性については、すべての情報を確認してください。 修正を行うには、必要に応じて設定を指定した早期の手順に戻ります。

   > [!div class="mx-imgBorder"]
   > ![パッケージを確認する](Media/testapplication15.png)

2. また、検証実行完了通知のパッケージの電子メール通知を受け取るには、通知ボックスをオンにすることもできます。

   > [!div class="mx-imgBorder"]
   > ![通知](Media/testapplication16.png)

3. 入力データ構成の完了が完了したら、[ **発行** ] をクリックしてパッケージをテスト ベースにアップロードします。  次の通知は、パッケージが正常に発行され、検証プロセスに入ったときに表示されます。  

   > [!NOTE]
   > 今後のテストでパッケージを受け入れる前に、パッケージを検証する必要があります。 検証には、実際のテスト環境でのパッケージの実行が含まれるため、最大で 24 時間かかる場合があります。 

   > [!div class="mx-imgBorder"]
   > ![パッケージ発行のプロンプト](Media/testapplication17.png)

4. [ **パッケージの管理** ] ページにリダイレクトされ、新しくアップロードされたパッケージの進行状況が確認されます。

   > [!div class="mx-imgBorder"]
   > ![パッケージを管理する](Media/testapplication18.png)

   > [!NOTE]
   > 検証プロセスが完了すると、検証の状態が [承諾済み] に変わります。 この時点で、それ以上のアクションは必要ありません。 構成済みのオペレーティング システムで新しい更新プログラムが利用可能になると、パッケージは自動的に取得されて実行されます。 検証プロセスが失敗した場合、パッケージはテストの準備ができていない。 ログを確認し、エラーが発生したかどうかを評価してください。 また、潜在的な問題がないかパッケージの構成設定を確認する必要がある場合もあります。

### <a name="resume-creation-of-a-saved-draft-package"></a>保存した下書きパッケージの作成を再開する

以前の下書きパッケージがある場合は、[ **新しい** パッケージ] ページで保存した下書きパッケージの一覧を表示できます。 **[編集]** 鉛筆アイコンをクリックすると、[**状態]** 列の説明に従って、中断した場所から選択したパッケージの編集を再開できます。

> [!div class="mx-imgBorder"]
> ![[新しいパッケージ] ページ](Media/testapplication19.png)

> [!NOTE]
> ダッシュボードには、保存された下書きパッケージのみが表示されます。 発行されたパッケージを表示するには、[パッケージの管理] ページに移動する必要があります。

